import{a as N}from"./chunk-OQ3NDOSO.js";import{a as T}from"./chunk-YPYBTDE7.js";import{c as z}from"./chunk-FG6M5CRZ.js";import"./chunk-63FS6JF7.js";import"./chunk-4U46NVW7.js";import"./chunk-IVF4M7CJ.js";import{Ba as r,Eb as P,Fa as x,Ka as v,Oa as C,Pb as S,Qb as I,Rb as w,Sb as E,Va as d,Xa as y,Z as f,_ as u,a as M,ab as n,b as O,bb as o,cb as s,fb as b,gb as _,hb as p,la as m,ob as a,pb as l,qb as k}from"./chunk-L6PLQJN2.js";function A(c,e){c&1&&(n(0,"div",9),s(1,"i",10),n(2,"p"),a(3,"Loading contacts..."),o()())}function F(c,e){if(c&1&&(n(0,"div",11),s(1,"i",12),a(2),o()),c&2){let t=p();r(2),k(" ",t.error()," ")}}function V(c,e){c&1&&(n(0,"div",13),s(1,"i",14),n(2,"h3"),a(3,"No contact requests yet"),o(),n(4,"p"),a(5,"When customers submit their phone numbers, they will appear here."),o()())}function R(c,e){if(c&1){let t=b();n(0,"button",37),_("click",function(){f(t);let g=p().$implicit,h=p(2);return u(h.markAsContacted(g))}),s(1,"i",38),a(2," Mark as Contacted "),o()}}function j(c,e){if(c&1){let t=b();n(0,"button",39),_("click",function(){f(t);let g=p().$implicit,h=p(2);return u(h.markAsNotContacted(g))}),s(1,"i",40),a(2," Mark as Pending "),o()}}function q(c,e){if(c&1&&(n(0,"div",26)(1,"div",27)(2,"div",28),s(3,"i",29),n(4,"span"),a(5),o()(),n(6,"span",30),a(7),o()(),n(8,"div",31)(9,"div",32),s(10,"i",18),n(11,"span",33),a(12),o()()(),n(13,"div",34),C(14,R,3,0,"button",35)(15,j,3,0,"button",36),o()()),c&2){let t=e.$implicit,i=p(2);y("contacted",t.isCalled),r(3),d("ngClass",t.isCalled?"fa-check-circle":"fa-clock"),r(2),l(t.isCalled?"Contacted":"Pending"),r(2),l(i.formatDate(t.createdAt)),r(5),l(t.phoneNumber),r(2),d("ngIf",!t.isCalled),r(),d("ngIf",t.isCalled)}}function Y(c,e){if(c&1&&(n(0,"div",15)(1,"div",16)(2,"div",17),s(3,"i",18),n(4,"div",19)(5,"span",20),a(6),o(),n(7,"span",21),a(8,"Total Requests"),o()()(),n(9,"div",17),s(10,"i",22),n(11,"div",19)(12,"span",20),a(13),o(),n(14,"span",21),a(15,"Contacted"),o()()(),n(16,"div",17),s(17,"i",23),n(18,"div",19)(19,"span",20),a(20),o(),n(21,"span",21),a(22,"Pending"),o()()()(),n(23,"div",24),C(24,q,16,8,"div",25),o()()),c&2){let t=p();r(6),l(t.totalContacts()),r(7),l(t.contactedCount()),r(7),l(t.pendingCount()),r(4),d("ngForOf",t.contacts())}}var D=class c{constructor(e,t){this.phoneContactService=e;this.router=t}contacts=m([]);loading=m(!1);error=m("");totalContacts=P(()=>this.contacts().length);contactedCount=P(()=>this.contacts().filter(e=>e.isCalled).length);pendingCount=P(()=>this.contacts().filter(e=>!e.isCalled).length);ngOnInit(){this.loadContacts()}loadContacts(){this.loading.set(!0),this.error.set(""),this.phoneContactService.getAllPhones().subscribe({next:e=>{this.contacts.set(e),this.loading.set(!1)},error:e=>{this.error.set("Failed to load phone contacts"),this.loading.set(!1),console.error("Error loading contacts:",e)}})}markAsContacted(e){this.phoneContactService.updatePhoneContact(e._id,{isCalled:!0}).subscribe({next:t=>{let i=this.contacts().map(g=>g._id===e._id?O(M({},g),{isCalled:!0}):g);this.contacts.set(i)},error:t=>{this.error.set("Failed to update contact"),console.error("Error updating contact:",t)}})}markAsNotContacted(e){this.phoneContactService.updatePhoneContact(e._id,{isCalled:!1}).subscribe({next:t=>{let i=this.contacts().map(g=>g._id===e._id?O(M({},g),{isCalled:!1}):g);this.contacts.set(i)},error:t=>{this.error.set("Failed to update contact"),console.error("Error updating contact:",t)}})}goBack(){this.router.navigate(["/admin"])}formatDate(e){if(!e)return"N/A";try{let t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}static \u0275fac=function(t){return new(t||c)(x(N),x(z))};static \u0275cmp=v({type:c,selectors:[["app-phone-contacts"]],decls:15,vars:4,consts:[[1,"phone-contacts-page"],[1,"page-header"],[1,"back-btn",3,"click"],[1,"fas","fa-arrow-left"],[1,"contacts-container"],["class","loading",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","contacts-grid",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-error"],[1,"fas","fa-exclamation-circle"],[1,"empty-state"],[1,"fas","fa-phone-slash"],[1,"contacts-grid"],[1,"stats-card"],[1,"stat"],[1,"fas","fa-phone"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-check-circle"],[1,"fas","fa-clock"],[1,"contacts-list"],["class","contact-card",3,"contacted",4,"ngFor","ngForOf"],[1,"contact-card"],[1,"contact-header"],[1,"contact-status"],[1,"fas",3,"ngClass"],[1,"contact-date"],[1,"contact-body"],[1,"phone-display"],[1,"phone-number"],[1,"contact-actions"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"]],template:function(t,i){t&1&&(s(0,"app-admin-header"),n(1,"div",0)(2,"div",1)(3,"button",2),_("click",function(){return i.goBack()}),s(4,"i",3),a(5," Back to Dashboard "),o(),n(6,"h1"),a(7,"Phone Contact Requests"),o(),n(8,"p"),a(9,"Manage callback requests from customers"),o()(),n(10,"div",4),C(11,A,4,0,"div",5)(12,F,3,1,"div",6)(13,V,6,0,"div",7)(14,Y,25,4,"div",8),o()()),t&2&&(r(11),d("ngIf",i.loading()),r(),d("ngIf",i.error()),r(),d("ngIf",!i.loading()&&i.contacts().length===0&&!i.error()),r(),d("ngIf",!i.loading()&&i.contacts().length>0))},dependencies:[E,S,I,w,T],styles:[".phone-contacts-page[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background:var(--nx-bg-light);padding:2rem 0}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 2rem;padding:0 2rem}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--nx-green);font-size:1rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;padding:.5rem 0;transition:all .3s ease}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{gap:.75rem;color:var(--nx-green-700)}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#212529;margin-bottom:.5rem;font-weight:700}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:#6c757d}.phone-contacts-page[_ngcontent-%COMP%]   .contacts-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 2rem}.phone-contacts-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--nx-green)}.phone-contacts-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;color:#6c757d}.phone-contacts-page[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-radius:8px;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;font-weight:500}.phone-contacts-page[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.phone-contacts-page[_ngcontent-%COMP%]   .alert.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.phone-contacts-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px #00000014}.phone-contacts-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#dee2e6;margin-bottom:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#212529;margin-bottom:.5rem}.phone-contacts-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .contacts-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 20px #00000014;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--nx-green)}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#212529}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.phone-contacts-page[_ngcontent-%COMP%]   .contacts-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #00000014;border-left:4px solid var(--nx-gold);transition:all .3s ease}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card.contacted[_ngcontent-%COMP%]{border-left-color:var(--nx-green);background:#f8fdf9}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f;transform:translateY(-2px)}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--nx-bg-dark)}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]   .contact-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]   .contact-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]   .contact-status[_ngcontent-%COMP%]:has(.fa-check-circle){color:var(--nx-green)}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]   .contact-status[_ngcontent-%COMP%]:has(.fa-clock){color:var(--nx-gold)}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]   .contact-date[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-body[_ngcontent-%COMP%]{margin-bottom:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-body[_ngcontent-%COMP%]   .phone-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background:var(--nx-bg-light);border-radius:8px}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-body[_ngcontent-%COMP%]   .phone-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--nx-green)}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-body[_ngcontent-%COMP%]   .phone-display[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#212529}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .3s ease;font-size:.95rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:var(--nx-green);color:#fff}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background:var(--nx-green-700);transform:translateY(-2px);box-shadow:0 4px 12px #1e6b334d}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.phone-contacts-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.phone-contacts-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.phone-contacts-page[_ngcontent-%COMP%]   .contact-card[_ngcontent-%COMP%]   .contact-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{D as PhoneContactsComponent};
