import{a as T}from"./chunk-IZJ4DLSG.js";import{a as N}from"./chunk-YPYBTDE7.js";import{c as R}from"./chunk-FG6M5CRZ.js";import"./chunk-63FS6JF7.js";import"./chunk-4U46NVW7.js";import"./chunk-IVF4M7CJ.js";import{Ba as i,Eb as M,Fa as b,Ka as h,Oa as _,Pb as k,Qb as I,Rb as E,Sb as z,Va as c,Xa as y,Z as x,_ as u,a as P,ab as n,b as f,bb as s,cb as r,fb as v,gb as C,hb as m,la as p,ob as a,pb as d,qb as w,rb as S}from"./chunk-L6PLQJN2.js";function A(g,t){g&1&&(n(0,"div",9),r(1,"i",10),n(2,"p"),a(3,"Loading messages..."),s()())}function F(g,t){if(g&1&&(n(0,"div",11),r(1,"i",12),a(2),s()),g&2){let e=m();i(2),w(" ",e.error()," ")}}function U(g,t){g&1&&(n(0,"div",13),r(1,"i",14),n(2,"h3"),a(3,"No messages yet"),s(),n(4,"p"),a(5,"When customers submit contact forms, their messages will appear here."),s()())}function V(g,t){if(g&1){let e=v();n(0,"button",42),C("click",function(){x(e);let l=m().$implicit,O=m(2);return u(O.markAsRead(l))}),r(1,"i",43),a(2," Mark as Read "),s()}}function j(g,t){if(g&1){let e=v();n(0,"button",44),C("click",function(){x(e);let l=m().$implicit,O=m(2);return u(O.markAsUnread(l))}),r(1,"i",45),a(2," Mark as Unread "),s()}}function Y(g,t){if(g&1&&(n(0,"div",24)(1,"div",25)(2,"div",26),r(3,"i",27),n(4,"span"),a(5),s()(),n(6,"span",28),a(7),s()(),n(8,"div",29)(9,"div",30)(10,"div",31),r(11,"i",32),n(12,"span",33),a(13,"Name:"),s(),n(14,"span",34),a(15),s()(),n(16,"div",31),r(17,"i",35),n(18,"span",33),a(19,"Phone:"),s(),n(20,"span",34),a(21),s()()(),n(22,"div",36)(23,"div",37),r(24,"i",38),n(25,"span"),a(26,"Message:"),s()(),n(27,"p"),a(28),s()()(),n(29,"div",39),_(30,V,3,0,"button",40)(31,j,3,0,"button",41),s()()),g&2){let e=t.$implicit,o=m(2);y("read",e.isRead),i(3),c("ngClass",e.isRead?"fa-envelope-open":"fa-envelope"),i(2),d(e.isRead?"Read":"Unread"),i(2),d(o.formatDate(e.createdAt)),i(8),S("",e.name," ",e.lastName,""),i(6),d(e.phoneNumber),i(7),d(e.message),i(2),c("ngIf",!e.isRead),i(),c("ngIf",e.isRead)}}function B(g,t){if(g&1&&(n(0,"div",15)(1,"div",16)(2,"div",17),r(3,"i",18),n(4,"div",19)(5,"span",20),a(6),s(),n(7,"span",21),a(8,"Total Messages"),s()()(),n(9,"div",17),r(10,"i",14),n(11,"div",19)(12,"span",20),a(13),s(),n(14,"span",21),a(15,"Read"),s()()(),n(16,"div",17),r(17,"i",18),n(18,"div",19)(19,"span",20),a(20),s(),n(21,"span",21),a(22,"Unread"),s()()()(),n(23,"div",22),_(24,Y,32,11,"div",23),s()()),g&2){let e=m();i(6),d(e.totalMessages()),i(7),d(e.readCount()),i(7),d(e.unreadCount()),i(4),c("ngForOf",e.messages())}}var D=class g{constructor(t,e){this.messageContactService=t;this.router=e}messages=p([]);loading=p(!1);error=p("");totalMessages=M(()=>this.messages().length);readCount=M(()=>this.messages().filter(t=>t.isRead).length);unreadCount=M(()=>this.messages().filter(t=>!t.isRead).length);ngOnInit(){this.loadMessages()}loadMessages(){this.loading.set(!0),this.error.set(""),this.messageContactService.getAllMessages().subscribe({next:t=>{this.messages.set(t),this.loading.set(!1)},error:t=>{this.error.set("Failed to load messages"),this.loading.set(!1),console.error("Error loading messages:",t)}})}markAsRead(t){this.messageContactService.updateMessageContact(t._id,{isRead:!0}).subscribe({next:()=>{let e=this.messages().map(o=>o._id===t._id?f(P({},o),{isRead:!0}):o);this.messages.set(e)},error:e=>{this.error.set("Failed to update message"),console.error("Error updating message:",e)}})}markAsUnread(t){this.messageContactService.updateMessageContact(t._id,{isRead:!1}).subscribe({next:()=>{let e=this.messages().map(o=>o._id===t._id?f(P({},o),{isRead:!1}):o);this.messages.set(e)},error:e=>{this.error.set("Failed to update message"),console.error("Error updating message:",e)}})}goBack(){this.router.navigate(["/admin"])}formatDate(t){if(!t)return"N/A";try{let e=new Date(t);return isNaN(e.getTime())?"Invalid Date":e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}static \u0275fac=function(e){return new(e||g)(b(T),b(R))};static \u0275cmp=h({type:g,selectors:[["app-messages"]],decls:15,vars:4,consts:[[1,"messages-page"],[1,"page-header"],[1,"back-btn",3,"click"],[1,"fas","fa-arrow-left"],[1,"messages-container"],["class","loading",4,"ngIf"],["class","alert alert-error",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","messages-grid",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"alert","alert-error"],[1,"fas","fa-exclamation-circle"],[1,"empty-state"],[1,"fas","fa-envelope-open"],[1,"messages-grid"],[1,"stats-card"],[1,"stat"],[1,"fas","fa-envelope"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"messages-list"],["class","message-card",3,"read",4,"ngFor","ngForOf"],[1,"message-card"],[1,"message-header"],[1,"message-status"],[1,"fas",3,"ngClass"],[1,"message-date"],[1,"message-body"],[1,"sender-info"],[1,"info-row"],[1,"fas","fa-user"],[1,"label"],[1,"value"],[1,"fas","fa-phone"],[1,"message-content"],[1,"message-label"],[1,"fas","fa-comment"],[1,"message-actions"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"]],template:function(e,o){e&1&&(r(0,"app-admin-header"),n(1,"div",0)(2,"div",1)(3,"button",2),C("click",function(){return o.goBack()}),r(4,"i",3),a(5," Back to Dashboard "),s(),n(6,"h1"),a(7,"Contact Messages"),s(),n(8,"p"),a(9,"Manage customer inquiries and messages"),s()(),n(10,"div",4),_(11,A,4,0,"div",5)(12,F,3,1,"div",6)(13,U,6,0,"div",7)(14,B,25,4,"div",8),s()()),e&2&&(i(11),c("ngIf",o.loading()),i(),c("ngIf",o.error()),i(),c("ngIf",!o.loading()&&o.messages().length===0&&!o.error()),i(),c("ngIf",!o.loading()&&o.messages().length>0))},dependencies:[z,k,I,E,N],styles:[".messages-page[_ngcontent-%COMP%]{min-height:calc(100vh - 80px);background:var(--nx-bg-light);padding:2rem 0}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 2rem;padding:0 2rem}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background:none;border:none;color:var(--nx-green);font-size:1rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;margin-bottom:1.5rem;padding:.5rem 0;transition:all .3s ease}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{gap:.75rem;color:var(--nx-green-700)}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#212529;margin-bottom:.5rem;font-weight:700}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;color:#6c757d}.messages-page[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 2rem}.messages-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--nx-green)}.messages-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.messages-page[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.25rem;color:#6c757d}.messages-page[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-radius:8px;margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;font-weight:500}.messages-page[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.messages-page[_ngcontent-%COMP%]   .alert.alert-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.messages-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 20px #00000014}.messages-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#dee2e6;margin-bottom:1rem}.messages-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#212529;margin-bottom:.5rem}.messages-page[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:1rem}.messages-page[_ngcontent-%COMP%]   .messages-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 20px #00000014;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--nx-green)}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#212529}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.messages-page[_ngcontent-%COMP%]   .messages-list[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #00000014;border-left:4px solid var(--nx-gold);transition:all .3s ease}.messages-page[_ngcontent-%COMP%]   .message-card.read[_ngcontent-%COMP%]{border-left-color:var(--nx-green);background:#f8fdf9}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f;transform:translateY(-2px)}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--nx-bg-dark)}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:1rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-status[_ngcontent-%COMP%]:has(.fa-envelope-open){color:var(--nx-green)}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-status[_ngcontent-%COMP%]:has(.fa-envelope){color:var(--nx-gold)}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{margin-bottom:1.5rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]{display:grid;gap:.75rem;margin-bottom:1.5rem;padding:1rem;background:var(--nx-bg-light);border-radius:8px}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--nx-green);font-size:1rem;width:20px}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#6c757d;min-width:60px}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#212529;font-weight:500}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem;font-weight:600;color:#212529}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   .message-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--nx-green)}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1rem;background:var(--nx-bg-light);border-radius:8px;border-left:3px solid var(--nx-green);color:#495057;line-height:1.6;margin:0;white-space:pre-wrap;word-wrap:break-word}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:all .3s ease;font-size:.95rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:var(--nx-green);color:#fff}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background:var(--nx-green-700);transform:translateY(-2px);box-shadow:0 4px 12px #1e6b334d}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268;transform:translateY(-2px);box-shadow:0 4px 12px #6c757d4d}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.messages-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.messages-page[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .sender-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{flex-wrap:wrap}.messages-page[_ngcontent-%COMP%]   .message-card[_ngcontent-%COMP%]   .message-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{D as MessagesComponent};
